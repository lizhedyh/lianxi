<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>ceshi</title>
    <script>
        "use strict";!function(){var i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"_Owl_",n=window;n[i]||(n[i]={isRunning:!1,isReady:!1,preTasks:[],dataSet:[],use:function(i,t){this.isReady&&n.Owl&&n.Owl[i](t),this.preTasks.push({api:i,data:[t]})},add:function(i){this.dataSet.push(i)},run:function(){var t=this;if(!this.isRunning){this.isRunning=!0;var i=n.onerror;n.onerror=function(){this.isReady||this.add({type:"jsError",data:arguments}),i&&i.apply(n,arguments)}.bind(this),(n.addEventListener||n.attachEvent)("error",function(i){t.isReady||t.add({type:"resError",data:[i]})},!0)}}},n[i].run())}();
    </script>
    <script crossorigin="anonymous" src="//s1.51ping.com/app/owl/static/owl_1.8.11.js"></script>    
    <script>
      Owl.start({
        project: 'lizhe',
        pageUrl: 'http://localhost:8080/index.html',
        devMode: true, // 测试环境需要添加这个参数
        resource:{
          sampleApi:1 //错误上报比例
        },
        autoCatch:{
          console:true //默认false, 监控console.error错误, 错误集中在consoleError分类下
        }
      });
    </script>
  </head>
  <body>
    <div>ceshi</div>
  
    <script type="application/javascript"  >
    ;(function (global) {
      /*!
 * Thunder.js v2.3.7
 * (c) 2019-07-02 14:28:13 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Thunder=e()}(this,function(){"use strict";function t(t,e){window.fetch(t.url,{method:t.method,body:t.body}).then(function(t){return t.ok?t.text():e(t)}).then(function(t){e(null,t)}).catch(e)}function e(t,e){var n=new window.XMLHttpRequest;n.withCredentials=!1,n.open(t.method,t.url,!0),n.onreadystatechange=function(){4===n.readyState&&(200===n.status?(n.onreadystatechange=null,e(null,n.responseText)):e(new Error("ThunderError: content load failed")))},n.send(t.body)}function n(n,r){if(!R)return r(new Error("ThunderError: not in browser"));var o={method:"GET",data:null,url:"",body:void 0};return"string"==typeof n?o.url=n:u(o,n),o.method||(o.method=I.method),o.method=o.method.toUpperCase(),o.data&&(o.body=JSON.stringify(o.data)),L?t(o,r):e(o,r)}function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l;return new Promise(function(r,o){n(t,function(t,n){t?(e(t),o(t)):(e(null,n),r(n))})})}function o(t,e,n){var r=document.head||document.getElementsByTagName("head")[0],o=void 0;return"js"===e?(o=document.createElement("script"),o.type="text/javascript",o.charset="utf-8",o.text=t):(o=document.createElement("style"),o.type="text/css",o.charset="utf-8",o.textContent=t),n&&h(n).forEach(function(t){o.setAttribute(t,n[t])}),r.appendChild(o),"function"==typeof o.onload&&o.onload(),o}function i(t){var e=document.createElement("script");return e.type="text/javascript",e.charset="utf-8",e.async=!0,e.timeout=12e4,e.src=t,e}function a(t){var e=document.createElement("link");return e.rel="stylesheet",e.href=t,e.timeout=12e4,e.src=t,e}function s(t,e,n,r){function o(t){f(),u.onerror=u.onload=null,clearTimeout(p),r(t)}function s(){d(),u.onerror=u.onload=null,clearTimeout(p),r(null,u)}var c=document.head||document.getElementsByTagName("head")[0],u=void 0;if("js"===e?(u=i(t),n&&h(n).forEach(function(t){u.setAttribute(t,n[t])})):"css"===e&&(u=a(t)),!u)return r(new Error("execModuleAsyncLoad: wrong type with "+e));var f=l,d=l;"function"==typeof u.onerror&&(f=u.onerror),"function"==typeof u.onload&&(d=u.onload),u.onerror=o,u.onload=s;var p=setTimeout(function(){o(new Error("execModuleAsyncLoad: timeout "+t))},12e4);return c.appendChild(u),u}function c(){if(j){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[0],o=void 0;console[r]?(o=console[r],e.shift()):o=console.log,e.unshift("[Thunder]"),o.apply(console,e)}}function u(t,e){if(void 0===t||null===t)throw new TypeError("Cannot convert first argument to object");for(var n=Object(t),r=1;r<arguments.length;r++){var o=arguments[r];if(void 0!==o&&null!==o)for(var i=h(Object(o)),a=0,s=i.length;a<s;a++){var c=i[a],u=Object.getOwnPropertyDescriptor(o,c);void 0!==u&&u.enumerable&&(n[c]=o[c])}}return n}function h(t){if(!M&&Object.keys)return Object.keys(t);if(t!==Object(t))throw new TypeError("Object.keys called on a non-object");var e=[],n=void 0;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}function l(){}function f(t,e){for(var n,r,o=-1^e,i=0,a=t.length;i<a;)n=t.charCodeAt(i++),n<128?o=o>>>8^x[255&(o^n)]:n<2048?(o=o>>>8^x[255&(o^(192|n>>6&31))],o=o>>>8^x[255&(o^(128|63&n))]):n>=55296&&n<57344?(n=64+(1023&n),r=1023&t.charCodeAt(i++),o=o>>>8^x[255&(o^(240|n>>8&7))],o=o>>>8^x[255&(o^(128|n>>2&63))],o=o>>>8^x[255&(o^(128|r>>6&15|(3&n)<<4))],o=o>>>8^x[255&(o^(128|63&r))]):(o=o>>>8^x[255&(o^(224|n>>12&15))],o=o>>>8^x[255&(o^(128|n>>6&63))],o=o>>>8^x[255&(o^(128|63&n))]);return(-1^o)>>>0}function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9;return Math.floor(Math.random()*(e-t+1))+t}function p(){for(var t=16,e="";t--;)e+=""+d();return e}function v(){return $?performance.now():Date.now()}function g(){return Z?Math.floor(performance.now()):Date.now()}function m(t,e,n){this.message=t,this.statusCode=e,this.result=n||{}}function y(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e.split("\t"),r=t,o=0,i=g(),a=0;a<n.length;a++){var s=n[a][0];if("="===s)o+=parseInt(n[a].slice(1),10);else if("-"===s){var c=parseInt(n[a].slice(1),10);r=r.slice(0,o)+r.slice(o+c)}else{if("+"!==s)throw new m("Broken patch found",rt.CLIENT_PATCH_ERROR);var u=decodeURI(n[a].slice(1));r=r.slice(0,o)+u+r.slice(o),o+=u.length}}return{content:r,fullLength:r.length,patchLength:e.length,recoverCost:g()-i}}function k(t,e){var n=JSON.parse(t),r=void 0;if(n.status===nt.FAILED)throw new m("Stark service down",n.code);if(n.status===nt.FULL&&(r={status:n.status,statusCode:n.code,content:n.content,fullLength:n.content.length,patchLength:n.content.length,checksum:n.newFileChecksum}),n.status===nt.PATCH){var o=y(e,n.content);r={status:n.status,statusCode:n.code,content:o.content,fullLength:o.fullLength,patchLength:o.patchLength,checksum:n.newFileChecksum}}return r}function _(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=r.address,i=r.projectName,a=o||tt;if(e&&e.hash){var s=e.filename,c=n.filename;return""+a+i+"?oldFilePath="+encodeURIComponent(s)+"&newFilePath="+encodeURIComponent(c)}}function w(t,e,n,r){if(!n.state.StarkOptions)return r.Promise.resolve();var o=n.state.StarkOptions,i=o.projectName,a=o.fallback,s=a||et.replace("PROJECT_NAME",i);return n.set({fallbackCDN:s}),new ot(t,e,n.state.StarkOptions,r).getDiff()}function E(t){t.prototype._updateAdapter=w}var C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},O=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),S=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},A=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},P=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},T=function(t){function e(t){return"[object Array]"===Object.prototype.toString.call(t)}function n(){for(var t=0;t<b.length;t++)b[t][0](b[t][1]);b=[],p=!1}function r(t,e){b.push([t,e]),p||(p=!0,E(n,0))}function o(t,e){function n(t){s(e,t)}function r(t){u(e,t)}try{t(n,r)}catch(t){r(t)}}function i(t){var e=t.owner,n=e.state_,r=e.data_,o=t[n],i=t.then;if("function"==typeof o){n=k;try{r=o(r)}catch(t){u(i,t)}}a(i,r)||(n===k&&s(i,r),n===_&&u(i,r))}function a(t,e){var n;try{if(t===e)throw new TypeError("A promises callback cannot return that same promise.");if(e&&("function"==typeof e||"object"===(void 0===e?"undefined":C(e)))){var r=e.then;if("function"==typeof r)return r.call(e,function(r){n||(n=!0,e!==r?s(t,r):c(t,r))},function(e){n||(n=!0,u(t,e))}),!0}}catch(e){return n||u(t,e),!0}return!1}function s(t,e){t!==e&&a(t,e)||c(t,e)}function c(t,e){t.state_===m&&(t.state_=y,t.data_=e,r(l,t))}function u(t,e){t.state_===m&&(t.state_=y,t.data_=e,r(f,t))}function h(t){var e=t.then_;t.then_=void 0;for(var n=0;n<e.length;n++)i(e[n])}function l(t){t.state_=k,h(t)}function f(t){t.state_=_,h(t)}function d(t){if("function"!=typeof t)throw new TypeError("Promise constructor takes a function argument");if(this instanceof d==!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],o(t,this)}var p,v=t.Promise,g=v&&"resolve"in v&&"reject"in v&&"all"in v&&"race"in v&&function(){var t;return new v(function(e){t=e}),"function"==typeof t}(),m="pending",y="sealed",k="fulfilled",_="rejected",w=function(){},E="undefined"!=typeof setImmediate?setImmediate:setTimeout,b=[];return d.prototype={constructor:d,state_:m,then_:null,data_:void 0,then:function(t,e){var n={owner:this,then:new this.constructor(w),fulfilled:t,rejected:e};return this.state_===k||this.state_===_?r(i,n):this.then_.push(n),n.then},catch:function(t){return this.then(null,t)}},d.all=function(t){var n=this;if(!e(t))throw new TypeError("You must pass an array to Promise.all().");return new n(function(e,n){for(var r,o=[],i=0,a=0;a<t.length;a++)r=t[a],r&&"function"==typeof r.then?r.then(function(t){return i++,function(n){o[t]=n,--i||e(o)}}(a),n):o[a]=r;i||e(o)})},d.race=function(t){var n=this;if(!e(t))throw new TypeError("You must pass an array to Promise.race().");return new n(function(e,n){for(var r,o=0;o<t.length;o++)r=t[o],r&&"function"==typeof r.then?r.then(e,n):e(r)})},d.resolve=function(t){var e=this;return t&&"object"===(void 0===t?"undefined":C(t))&&t.constructor===e?t:new e(function(e){e(t)})},d.reject=function(t){return new this(function(e,n){n(t)})},g?v:d}("undefined"!=typeof window?window:"undefined"!=typeof global&&global||{}),R="undefined"!=typeof window,N=function(t){if(!t)return!1;try{var e="__LS_SUPPORT_TEST_KEY__";return t.setItem(e,e),t.removeItem(e,e),!0}catch(t){return!1}}(window.localStorage),j=R&&"DEBUG_THUNDER"in window&&window.DEBUG_THUNDER,L=R&&"fetch"in window,M=R&&"UNIT_TEST_THUNDER"in window&&window.UNIT_TEST_THUNDER,I={method:"GET",data:null,url:""},K={markOnce:l,mark:l,markEnd:l},x=function(){for(var t=0,e=new Array(256),n=0;256!==n;++n)t=n,t=1&t?-306674912^t>>>1:t>>>1,t=1&t?-306674912^t>>>1:t>>>1,t=1&t?-306674912^t>>>1:t>>>1,t=1&t?-306674912^t>>>1:t>>>1,t=1&t?-306674912^t>>>1:t>>>1,t=1&t?-306674912^t>>>1:t>>>1,t=1&t?-306674912^t>>>1:t>>>1,t=1&t?-306674912^t>>>1:t>>>1,e[n]=t;return"undefined"!=typeof Int32Array?new Int32Array(e):e}(),U=function(){function t(e,n,r){b(this,t),this.type="",this.name=e,this.state=n,this.options=r,this.store=r.store,this.logger=r.logger,this._updateAdapter=r.updateAdapter,this._content=""}return O(t,[{key:"load",value:function(){return this.getContent().then(l,function(t){console.error(t)})}},{key:"check",value:function(){if(void 0===this.state.checksum)return!0;this.logger.mark("check:"+this.cacheKey,{chunkName:this.cacheKey,channel:"lx",reason:"chunkChecksum",size:Math.floor(this._content.length/1024),originChecksum:this.state.checksum,reportCost:!0});var t=f(this._content),e=t===this.state.checksum;return this.logger.markEnd("check:"+this.cacheKey,{isMatch:e,currentChecksum:t}),e||(this.store.remove(this.cacheKey),!1)}},{key:"_request",value:function(){var t=this;return new Promise(function(e,n){r(t.link,function(r,o){if(r)return t.logger.markEnd("async:"+t.cacheKey,{reason:"updateFullFailure",reportCost:!0}),n(r);t._content=o,t.store.add({name:t.cacheKey,hash:t.hash,cacheAge:t.state.cacheAge||t.options.cacheAge,content:t._content,filename:t.filename}),t.logger.markEnd("async:"+t.cacheKey,{reason:"updateFullSuccess",reportCost:!0}),e(o)})})}},{key:"update",value:function(t){var e=this;return this._updateAdapter(this.name,{localChunk:t,remoteChunk:this.state}).then(function(t){return t&&t.content?(e._content=t.content,e.store.add({name:e.cacheKey,hash:e.hash,cacheAge:e.state.cacheAge||e.options.cacheAge,content:e._content,filename:e.filename}),e._content):e._request()},function(t){return console.error(t),e._request()})}},{key:"getContent",value:function(){var t=this;return this._content?Promise.resolve(this._content):(this.logger.markOnce("request:"+this.cacheKey,{chunkName:this.cacheKey,channel:"lx",reason:"request"}),this.logger.mark("async:"+this.cacheKey,{chunkName:this.cacheKey,channel:"lx",reportCost:!0}),this.store.get(this.cacheKey).then(function(e){if(!e)return t._request();var n=e.content,r=e.hash;return t.hash===r?(t.logger.markEnd("async:"+t.cacheKey,{reason:t.store.type,reportCost:!0}),t._content=n,Promise.resolve(t._content)):t.update(e)}))}},{key:"fallback",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return this.logger.mark("fallback:"+this.cacheKey,{chunkName:this.cacheKey,channel:"lx",reason:"fallbackStart"}),new Promise(function(n,r){e(t.fallbackLink,t.type,t.attrs,function(o){if(!o)return t.fallbackState="fallbackSuccessFrist",n();e(t.fallbackLink,t.type,t.attrs,function(e){if(!e)return t.fallbackState="fallbackSuccessSecond",n();t.fallbackState="fallbackFailure",r(e)})})})}},{key:"cacheKey",get:function(){return"<"+this.type+">:"+this.name}},{key:"hash",get:function(){return this.state.hash||this.filename||this.link}},{key:"link",get:function(){return this.state.link?this.state.link:this.options.config.publicPath+this.filename}},{key:"fallbackState",set:function(t){this.logger.markEnd("fallback:"+this.cacheKey,{chunkName:this.cacheKey,channel:"lx",reason:t})}},{key:"fallbackLink",get:function(){return this.state.link?this.state.link:(this.options.config.fallbackCDN||this.options.config.publicPath)+this.filename}},{key:"attrs",get:function(){return u({"thunder-cache-key":this.cacheKey,crossorigin:this.options.config.crossOriginLoading},this.options.attrs,this.state.attrs)}}]),t}(),W="js",D=function(t){function e(t,n,r){b(this,e);var o=P(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r));return o.type=W,o}return A(e,t),O(e,[{key:"render",value:function(){var t=this;return!this._content||this.options.config.checksum&&!this.check()?this.fallback().then(function(){t.state.runScript&&o(t.state.runScript,"js",t.attrs)}):Promise.resolve(o(this._content,"js",this.attrs)).then(function(){t.state.runScript&&o(t.state.runScript,"js",t.attrs)})}},{key:"filename",get:function(){return this.state.filename}}],[{key:"type",get:function(){return W}}]),e}(U),H="css",F=function(t){function e(t,n,r){b(this,e);var o=P(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r));return o.type=H,o}return A(e,t),O(e,[{key:"render",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,e=arguments[1];return!this._content||this.options.config.checksum&&!this.check()?this.fallback(e):Promise.resolve(t(this._content,"css",this.attrs))}},{key:"filename",get:function(){return this.state.filename}}],[{key:"type",get:function(){return H}}]),e}(U),V=function(){function t(e){b(this,t),this.state=e,this.version="2.3.7",this.running=!0,this.type="tiny",this.starkAppKey=this.state.StarkOptions?this.state.StarkOptions.projectName:"",this._chunks=[],this.init()}return O(t,[{key:"set",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.nonce,n=t.publicPath,r=t.attrs,o=t.fallbackCDN;e&&(this._chunkOptions.attrs.nonce=e),r&&u(this._chunkOptions.attrs,r),n&&(this._chunkOptions.config.publicPath=n),o&&(this._chunkOptions.config.fallbackCDN=o)}},{key:"init",value:function(){var e=this;R&&(window.__thunder__=this),t._installedPlugins.forEach(function(t){return t(e)}),this.logger||(this.logger=K),this._chunkOptions={attrs:u({},this.state.outputOptions.attrs),config:this.state.outputOptions,cacheAge:this.state.cacheAge,store:this.store,logger:this.logger,updateAdapter:this.updateAdapter.bind(this)},this.state.resources.forEach(function(n){t.Chunks.forEach(function(t){n.type===t.type&&e._chunks.push(new t(n.name,n,e._chunkOptions))})}),this.store.saveChunksMap(this._chunks.map(function(t){return t.cacheKey})),this.logger.markOnce("init",{channel:"lx",SWSupport:this.serviceWorkerManager&&this.serviceWorkerManager.isSupport(),useSW:!!this.state.serviceWorker,reason:"init"})}},{key:"updateAdapter",value:function(t,e){return this._updateAdapter?this._updateAdapter(t,e,this,{Promise:Promise,request:r,debug:c,logger:this.logger}):Promise.resolve()}},{key:"bundleLoader",value:function(t){return this.parallel(t)}},{key:"styleLoader",value:function(t){return this.parallelStyle(t)}},{key:"parallelStyle",value:function(t){return this.parallel(t,"css")}},{key:"load",value:function(t,e){var n=this,r=Promise.resolve();return t.forEach(function(t){t.action=t.action||"load","load"===t.action&&(r=r.then(function(){return n.parallel(t.chunks,t.type)}))}),t.forEach(function(t){"prefetch"===t.action&&(r=r.then(function(){return n.prefetch(t.chunks,t.type)}))}),r.then(function(){e&&e()}),r}},{key:"parallel",value:function(t,e){var n=this._getChunks(t,e);return Promise.all(n.map(function(t){return t.load()})).then(function(){var t=Promise.resolve();return n.forEach(function(e){t=t.then(function(){return e.render()})}),t}).catch(function(t){return console.error(t)})}},{key:"prefetch",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=this._getChunks(t);return e=e.concat(this._getChunks(t,"css")),new Promise(function(t,e){setTimeout(t,500)}).then(function(){var t=[];return e.map(function(e){e._content||t.push(e)}),Promise.all(t.map(function(t){return t.getContent()}))})}},{key:"_getChunks",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"js",r=void 0,o=[];return r="string"==typeof t?[t]:t,r.forEach(function(t){e._chunks.forEach(function(e){e.type===n&&t===e.name&&o.push(e)})}),o}}]),t}();V.StyleChunk=F,V.ScriptChunk=D,V.BaseChunk=U,V.Chunks=[F,D],V._installedPlugins=[],V.use=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.shift(),o=this._installedPlugins;return!r||o.indexOf(r)>-1?this:(o.push(r),this)};var $=R&&"performance"in window&&"now"in performance,q=function(){function t(){b(this,t),this.logQueue=[],this._timer=null,this._delay=100,this._url="//report.meituan.com",this.report=this.report.bind(this)}return O(t,[{key:"_report",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,n=p(),o=p(),i=document.cookie.replace(/(?:(?:^|.*;\s*)_lxsdk_cuid\s*=\s*([^;]*).*$)|^.*$/,"$1"),a=this.logQueue.map(function(t){var e=p().slice(0,4),n=p();return t.lxid=i,{req_id:n,val_cid:t.cid?t.cid:"c_c4nzgz77",nt:0,isauto:7,tm:t.createdAt,val_lab:t,val_bid:t.bid||"b_w006udto",seq:+e,nm:"MV"}});return r({url:this._url,method:"post",data:[{category:"data_sdk_smartpay",sdk_ver:"4.3.0",ct:"www",ch:"web",ua:navigator&&navigator.userAgent,sc:"640*360",uuid:o,lxid:i,msid:n,appnm:"qrcode_pay_fe",evs:a}]}).then(function(){t.logQueue.length=0,e()}).catch(function(t){t&&console.log(t),e(t)})}},{key:"report",value:function(t,e){var n=this;t.createdAt=Date.now(),this.logQueue.push(t),this._timer&&clearTimeout(this._timer),this._timer=setTimeout(function(){n._timer=null,n._report(e)},this._delay)}}]),t}(),Q=new q,B=function(){function t(e){var n=e.project,r=e.version,o=e.starkAppKey;b(this,t),this.project=n,this.version=r,this.starkAppKey=o,this.logQueue=[],this.markQueue={},this._reporters=[{reporter:Q.report,channel:"lx"}],this._timer=null}return O(t,[{key:"use",value:function(t,e){if("function"==typeof t){var n=!1;this._reporters.map(function(e){e.reporter===t&&(n=!0)}),n||this._reporters.push({channel:e,reporter:t})}}},{key:"mark",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t&&(this.markQueue[t]={createdAt:v(),data:e})}},{key:"markEnd",value:function(t,e,n){var r=this.markQueue[t];if(r){var o=v(),i=o-r.createdAt,a={key:t,data:u(n?{}:{project:this.project,starkAppKey:this.starkAppKey,cost:i,name:t,version:this.version},r.data,e)};if(a.error)return console.log(a.err);a.data.cost&&(a.data.cost=Math.floor(a.data.cost)),this.logQueue.push(a),delete this.markQueue[t],this.report()}}},{key:"markOnce",value:function(t,e,n){this.mark(t,e),this.markEnd(t,e,n)}},{key:"report",value:function(){this._timer&&clearTimeout(this._timer),this._timer=setTimeout(this._report.bind(this),300)}},{key:"_report",value:function(){var t=this;this._timer=null,this.logQueue.forEach(function(e){e.data&&t._reporters.forEach(function(t){e.data.channel?t.channel===e.data.channel&&t.reporter(e.data):t.reporter(e.data)})}),this.logQueue.length=0}}]),t}(),G=function(t){t.logger=new B({version:t.version,project:t.state.project,starkAppKey:t.starkAppKey})},z="Thunder",J=function(){function t(e){var n=e.version,r=e.project,o=void 0===r?"":r;b(this,t),this.type="LSCache",this.prefix=z+"#"+o,this._storekey=this.prefix+":store",this.storage=N&&window.localStorage,this.state={size:0,count:0,version:n,cacheMap:{},chunks:[]},this._delay=100,this._saveTimer=null,this._load()}return O(t,[{key:"_save",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._delay;if(N){var n=function(){var e=JSON.stringify(t.state);try{t.storage.setItem(t._storekey,e)}catch(e){t.clear(),c("error",e)}};if(0===e)return n();this._saveTimer&&clearTimeout(this._saveTimer),this._saveTimer=setTimeout(function(){n()},e)}}},{key:"_load",value:function(){if(N)try{this.storage.setItem(z+"?v",this.state.version);var t=this.storage.getItem(this._storekey);if(!t)return;var e=JSON.parse(t);this._schemaCheck(e)&&(this.state=e)}catch(t){this.clear(),c("error",t)}}},{key:"_schemaCheck",value:function(t){var e=this,n=!0,r=Object.prototype.toString;return h(this.state).forEach(function(o){n&&(n=r.call(t[o])===r.call(e.state[o]))}),h(t).forEach(function(t){void 0===e.state[t]&&(n=!1)}),n}},{key:"_getChunkName",value:function(t){return this.prefix+"~"+t}},{key:"_updateStateInfo",value:function(){var t=this,e=0,n=0;h(this.state.cacheMap).forEach(function(r){e+=t.state.cacheMap[r].size||0,n++}),this.state.size=e,this.state.count=n}},{key:"saveChunksMap",value:function(t){this.state.chunks=t,this._save(0),this.clearAbandonedChunkCache(t)}},{key:"clearAbandonedChunkCache",value:function(t){var e=this;if(N){var n=this.prefix+"~",r=new RegExp(n),o=[];h(this.storage).forEach(function(t){r.test(t)&&o.push(t.replace(n,""))}),o.forEach(function(n){-1===t.indexOf(n)&&e.remove(n)})}}},{key:"_get",value:function(t){if(!N)return null;var e=this.storage.getItem(this._getChunkName(t)),n=this.state.cacheMap[t];if(!e||!n)return this.remove(t),null;if(n.expireAt){var r=Date.now();if(n.expireAt<r)return null}return S({},n,{content:e})}},{key:"get",value:function(t){return Promise.resolve(this._get(t))}},{key:"add",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!N)return!1;try{var n=t.name,r=t.hash,o=t.content,i=t.filename,a=t.cacheAge;this.storage.setItem(this._getChunkName(n),o);var s=Date.now(),c=0;return a&&(c=s+1e3*a),this.state.cacheMap[n]={loadedAt:s,size:Math.round(o.length/1024),hash:r,expireAt:c,filename:i},this._updateStateInfo(),this._save(),Promise.resolve(!0)}catch(n){return e&&this.retryAdd(t,3),Promise.resolve(!1)}}},{key:"retryAdd",value:function(t,e){if(!e)return c("retry add failed  "+t.name+" is too large: "+Math.floor(t.content.length/1024)+" KB");e--,this.free(),this.add(t,!1)?c("retry add success",e):this.retryAdd(t,e)}},{key:"free",value:function(){var t=this,e=void 0,n=h(this.state.cacheMap).map(function(n){return e=t.state.cacheMap[n],{name:n,loadedAt:e.loadedAt}}).sort(function(t,e){return t.loadedAt-e.loadedAt});n.length&&this.remove(n[0].name)}},{key:"clear",value:function(){var t=this;h(this.state.cacheMap).forEach(function(e){t.remove(e)})}},{key:"remove",value:function(t){if(N){this.state.cacheMap[t]&&(delete this.state.cacheMap[t],this._updateStateInfo()),this.storage.removeItem(this._getChunkName(t)),this._save()}}}]),t}(),X=function(t){t.store=new J({project:t.starkAppKey||t.state.project,version:t.version})},Y="undefined"!=typeof window,Z=Y&&"performance"in window&&"now"in performance,tt="https://jarvas-static.meituan.net/diff/",et="//jarvas-static.meituan.net/file/PROJECT_NAME?filePath=",nt={PATCH:2,FULL:1,FAILED:0},rt={CLIENT_PATCH_ERROR:416,CHECKSUM_FAILED:409,UNKNOWN_ERROR:400,LOCAL_VERSION_NOT_FOUND:205};m.prototype=new Error,m.prototype.constructor=m;var ot=function(){function t(e,n,r,o){var i=n.localChunk,a=n.remoteChunk;b(this,t),this.chunkName=e,this.localChunk=i||{},this.remoteChunk=a,this.options=r,this.helpers=o}return O(t,[{key:"report",value:function(t,e){var n=t.status,r=t.statusCode,o=t.loadCost,i=this.chunkName,a=this.localChunk,s=this.remoteChunk.hash||this.remoteChunk.filename;this.helpers.logger.markOnce("stark:"+i,{channel:"lx",appKey:this.options.projectName,fileName:i,currentVersion:a.hash,diffVersion:s,saveSize:Math.max(e.fullLength-e.patchLength,0),diffState:n,diffDetailState:r,patchLength:e.patchLength,fullLength:e.fullLength,recoverCost:e.recoverCost,loadCost:o,checksum:e.checksum},!1)}},{key:"getDiff",value:function(){var t=this,e=this.chunkName,n=this.localChunk,r=this.remoteChunk.hash,o=_(e,this.localChunk,this.remoteChunk,this.options);if(!n||!n.filename||!n.content)return this.helpers.Promise.resolve();var i=g();return this.helpers.request(o).then(function(e){var r=k(e,n.content),o=r.status,a=r.statusCode,s=r.content;return t.report({status:o,statusCode:a,loadCost:g()-i},r),s}).then(function(t){return{name:e,content:t,hash:r,from:"diff"}},function(e){t.helpers.debug("error","getDiff failed",e);var r=void 0;r=n.hash?e.statusCode||rt.UNKNOWN_ERROR:rt.LOCAL_VERSION_NOT_FOUND;var o=e&&e.result||{};return t.report({status:nt.FAILED,statusCode:r},o),t.helpers.Promise.resolve()})}}]),t}(),it=function(){function t(){b(this,t),this._listeners={}}return O(t,[{key:"$on",value:function(t,e,n){return n=n||null,this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push({fn:e,ctx:n}),this._listeners[t].length-1}},{key:"$once",value:function(t,e,n){n=n||null;var r=function r(){for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];e.apply(n,i),this.$off(t,r)};this.$on(t,r,this)}},{key:"$off",value:function(t,e){var n=this;this._listeners[t]&&this._listeners[t].length&&(e||(this._listeners[t].map(function(t){return null}),this._listeners[t].length=0),"function"==typeof e&&this._listeners[t].map(function(r,o){r.fn===e&&(n._listeners[t].splice(o,1),r=null)}))}},{key:"$emit",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];if(e.length){var r=e[0];e.shift(),this._listeners[r]&&this._listeners[r].length&&this._listeners[r].map(function(t){t.fn.apply(t.ctx,e)})}}}]),t}(),at=Boolean(R&&"serviceWorker"in navigator&&"onmessage"in navigator.serviceWorker),st=R&&"caches"in window,ct=R&&"MessageChannel"in window,ut=Boolean(R&&("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/))),ht=Boolean(R&&"https:"===window.location.protocol),lt=/^thunder:sw-event:/i,ft=/\$\$\$thunder-serviceworker/,dt=function(t){function e(t,n){b(this,e);var r=P(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.state=t,r.options=t.serviceWorker,r.serviceWorker=null,r.logger=n.logger,r.cache=r.initCache(),r.ready=r._ready(),r}return A(e,t),O(e,[{key:"isSupport",value:function(){return e.isSupport()}},{key:"_ready",value:function(){var t=this;return e.isSupport()?this.options?(navigator.serviceWorker.onmessage=this.onMessage.bind(this),this._register().then(function(e){return t.serviceWorker=e,t.sendMessage({command:"update:ua",userAgent:window.navigator.userAgent}),t.report(),e})):(e.unregister(),Promise.resolve()):Promise.resolve()}},{key:"_register",value:function(){return navigator.serviceWorker.register(this.options.path+"?v="+this.state.compilation.hash,{scope:this.options.scope}).then(function(t){return t.active?t.active:new Promise(function(e,n){t.addEventListener("updatefound",function(){var n=t.installing;n.addEventListener("statechange",function(){"activated"===n.state&&e(n)})})})})}},{key:"report",value:function(){var t=this;this.sendMessage({command:"log"}).then(function(e){if(e.data||e.data instanceof Array){e.data.forEach(function(e){t.logger.markOnce("sw:cachedFetch",S({channel:"lx",reason:"swCache"},e.data,{url:e.key}))})}}).catch(function(e){t.logger.markOnce("swInitError",{channel:"lx",reason:"swInitError",message:e&&e.message,stack:e&e.toString()}),c("warn",e)})}},{key:"initCache",value:function(){var t=this;return{keys:function(){return t.sendMessage({command:"cache:keys"})},clear:function(){return t.sendMessage({command:"cache:clear"})},add:function(e){return t.sendMessage({command:"cache:add",url:e})},delete:function(e){return t.sendMessage({command:"cache:delete",url:e})}}}},{key:"sendMessage",value:function(t){var n=this;return this.ready.then(function(){return new Promise(function(r,o){if(!n.serviceWorker)return o(new Error("service-worker not ready"));if(!e.env.SUPPORT_MESSAGE_CHANNEL)return o(new Error("unsupport MessageChannel"));var i=new MessageChannel;i.port1.onmessage=function(t){t.data.error?o(t.data.error):r(t.data)},n.serviceWorker.postMessage(t,[i.port2])})})}},{key:"onMessage",value:function(t){if(t.data||!(t.data instanceof Object)){var n=t.data,r=n.type||"";if(e.env.SW_EVENT_PREFIX_REG.test(r)){var o=r.replace(e.env.SW_EVENT_PREFIX_REG,"");this.$emit(o,n)}}}},{key:"active",get:function(){return!!e.env.SUPPORT_SERVICE_WORKER&&(!!navigator.serviceWorker.controller&&"activated"===navigator.serviceWorker.controller.state)}}],[{key:"isSupport",value:function(){return e.env.SUPPORT_SERVICE_WORKER&&(e.env.IN_HTTPS||e.env.IN_LOCALHOST)}},{key:"unregister",value:function(){e.env.SUPPORT_SERVICE_WORKER&&e.env.SUPPORT_CACHE&&caches.keys&&caches.keys().then(function(t){t.forEach(function(t){e.env.THUNDER_CACHE_NAME_PRE.test(t)&&(caches.delete(t),c("cache cleard"))})}).catch(function(t){c("error","unregister",t)}),e.env.SUPPORT_SERVICE_WORKER&&(navigator.serviceWorker.getRegistration&&navigator.serviceWorker.getRegistration().then(function(t){t&&(t.unregister(),c("sw unregisted"))}).catch(function(t){c("error","unregister",t)}),navigator.serviceWorker.getRegistrations&&navigator.serviceWorker.getRegistrations().then(function(t){t.forEach(function(t){t.unregister()}),c("sw unregisted")}).catch(function(t){c("error","unregister",t)}))}}]),e}(it);dt.env={THUNDER_CACHE_NAME_PRE:ft,SW_EVENT_PREFIX_REG:lt,IN_HTTPS:ht,IN_LOCALHOST:ut,SUPPORT_MESSAGE_CHANNEL:ct,SUPPORT_CACHE:st,SUPPORT_SERVICE_WORKER:at};var pt=function(t){t.serviceWorkerManager=new dt(t.state,{logger:t.logger})};return window.Promise=T,V.use(G).use(X).use(pt).use(function(){return E(V)}),V});

      var thunderStateString = 'eyJ2ZXJzaW9uIjoyLCJyZXNvdXJjZXMiOlt7Im5hbWUiOiJhcHAiLCJ0eXBlIjoianMiLCJmaWxlbmFtZSI6ImJ1bmRsZS5iZmFmNWJhNjA0OTM5MDQzOGYyNC5qcyIsImNoZWNrc3VtIjoxODU1MDI1MzkwfV0sImNvbXBpbGF0aW9uIjp7Imhhc2giOiJiZmFmNWJhNjA0OTM5MDQzOGYyNCIsImZ1bGxIYXNoIjoiYmZhZjViYTYwNDkzOTA0MzhmMjRhMDY1NjY4NDE2ZTMifSwicHJvamVjdCI6IjNmMDNlZGI2IiwiY2FjaGVBZ2UiOjAsIlN0YXJrT3B0aW9ucyI6eyJwcm9qZWN0TmFtZSI6IjNmMDNlZGI2IiwiZGlzdCI6ImRpc3QiLCJ1cGxvYWRCbGFja2xpc3QiOlsiaW5kZXhcXC5odG1sIl19LCJvdXRwdXRPcHRpb25zIjp7InB1YmxpY1BhdGgiOiJodHRwczovL3MzcGx1cy5tZWl0dWFuLm5ldC92MS9tc3NfZTI4MjFkN2YwY2ZlNGFjMWJmOTIwMmVjZjk1OTBlNjcvY2RuLXByb2QvZmlsZTozZjAzZWRiNi8iLCJjcm9zc09yaWdpbkxvYWRpbmciOmZhbHNlLCJjaHVua0xvYWRUaW1lb3V0IjoxMjAwMDAsImZhbGxiYWNrQ0ROIjoiaHR0cHM6Ly9zM3BsdXMubWVpdHVhbi5uZXQvdjEvbXNzX2UyODIxZDdmMGNmZTRhYzFiZjkyMDJlY2Y5NTkwZTY3L2Nkbi1wcm9kL2ZpbGU6M2YwM2VkYjYvIiwiY2hlY2tzdW0iOnRydWUsImxpYnJhcnkiOiIiLCJob3RVcGRhdGVGdW5jdGlvbiI6IndlYnBhY2tIb3RVcGRhdGUiLCJqc29ucEZ1bmN0aW9uIjoid2VicGFja0pzb25wIiwidGh1bmRlciI6eyJmaWxlbmFtZSI6InRodW5kZXItdGlueS0yLjMuNy5qcyIsImF0dHJzIjp7fSwiY2hlY2tzdW0iOjE4MDIwMjk1OH0sImF0dHJzIjp7fX19'
      var thunderState = global.__thunderState__
      
      try {
        thunderState = thunderState || JSON.parse(atob(thunderStateString))
        global.__thunder__ = new Thunder(thunderState)
      } catch (e) {
        console.error('ERROR at init Thunder: ');
        console.error(e);
      }
    })(window)</script>
    <script type="application/javascript" >
  ;(function (global) {
    var thunder = global.__thunder__;
    thunder.load([{"type":"css","action":"load","chunks":[]},{"type":"js","action":"load","chunks":["app"]}])
  })(window);
  </script></body>
</html>

const { getThunderScript } = require('../plugin/util')

let thunderScriptContent = ''

function getCacheThunderScript (thunderState, forceUpdate) {
  if (!forceUpdate && thunderScriptContent) return thunderScriptContent
  let content
  try {
    content = getThunderScript(thunderState, 'tiny')
  } catch (e) {
    console.error(e)
  }
  if (content) {
    thunderScriptContent = `<script>${content}</script>`
  }
  return thunderScriptContent
}

module.exports = getCacheThunderScript

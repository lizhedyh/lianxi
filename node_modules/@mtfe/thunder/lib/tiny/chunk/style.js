import {
  execModule
} from '../util'
import Chunk from './chunk'
const CSSStaticType = 'css'

export default class StyleChunk extends Chunk {
  constructor (name, state, options) {
    super(name, state, options)
    this.type = CSSStaticType
  }

  static get type () {
    return CSSStaticType
  }

  /*
  * render
  * @param exec
  * @param execFallback
  */
  render (exec = execModule, execFallback) {
    if (this._content && (this.options.config.checksum ? this.check() : true)) {
      return Promise.resolve(exec(this._content, 'css', this.attrs))
    } else {
      return this.fallback(execFallback)
    }
  }

  get filename () {
    return this.state.filename
  }
}

const LOADER_SCRIPT = `
  // thunder loader
  if ('__thunder__' in window && __thunder__ && __thunder__.running) {
      return __thunder__.bundleLoader(chunkId)
          .then(function () {
              var chunk = installedChunks[chunkId]
              if(chunk !== 0) {
                  if(chunk) {
                      chunk[1](new Error('Loading chunk ' + chunkId + ' failed.'))
                  }
                  installedChunks[chunkId] = undefined
              }
          })
  }
`

const LOADER_SCRIPT_STYLE = `
  // thunder loader
  if ('__thunder__' in window && __thunder__ && __thunder__.running) {
      return Promise.all([__thunder__.styleLoader(chunkId), __thunder__.bundleLoader(chunkId)])
        .then(function () {
          var chunk = installedChunks[chunkId]
          if(chunk !== 0) {
              if(chunk) {
                  chunk[1](new Error('Loading chunk ' + chunkId + ' failed.'))
              }
              installedChunks[chunkId] = undefined
          }
        })
  }
`

module.exports = {
  LOADER_SCRIPT,
  LOADER_SCRIPT_STYLE
}

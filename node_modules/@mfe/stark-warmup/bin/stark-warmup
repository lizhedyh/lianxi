#!/usr/bin/env node

const program = require('commander');
const { warmup } = require('../');


program
  .version(require('../package.json').version)
  .command('warmup <repoPath> <thunderStateFilePath>', 'Prepare diff on Stark')
  .option('--version-count [versionCount]', 'Versions to warmup', 3)
  .option('--concurrent-count [concurrentCount]', 'Concurrent warmup count', 4)
  .option('--dry', 'Dry run, only prints urls')
  .action(function (repoPath, thunderStateFilePath) {
    warmup(repoPath, thunderStateFilePath, parseInt(program.versionCount, 10), program.dry, parseInt(program.concurrentCount, 10)).catch(console.error);
  })
  .parse(process.argv);
